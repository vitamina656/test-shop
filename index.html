<!DOCTYPE html>
<html>

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <title>PaymentMenu</title>
    <script language="javascript">
        const isMobile = /(android|ipad|iphone|ipod)/i.test(navigator.userAgent);
        const isiPad = /iPad|Macintosh/.test(navigator.userAgent) && navigator.maxTouchPoints > 0;
        const isSafari = navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1 && navigator.userAgent.indexOf('CriOS') == -1 &&
               navigator.userAgent.indexOf('FxiOS') == -1;
        console.log(navigator.userAgent);
        console.log("isMobile: "+isMobile);
        console.log("isiPad: "+isiPad);
        console.log("isSafari: "+isSafari);
        console.log('Safari: '+navigator.userAgent.indexOf('Safari'));
        console.log('Chrome: '+navigator.userAgent.indexOf('Chrome'));
        console.log('CriOS: '+navigator.userAgent.indexOf('CriOS'));
        console.log('FxiOS: '+navigator.userAgent.indexOf('FxiOS'));
        setTimeout(()=> { 
            document.getElementById("isMobile").innerHTML = "isMobile: "+isMobile;
            document.getElementById("isiPad").innerHTML = "isiPad: "+isiPad;
            document.getElementById("Safari").innerHTML = 'Safari: '+navigator.userAgent.indexOf('Safari');
            document.getElementById("Chrome").innerHTML = 'Chrome: '+navigator.userAgent.indexOf('Chrome');
            document.getElementById("CriOS").innerHTML = 'CriOS: '+navigator.userAgent.indexOf('CriOS');
            document.getElementById("FxiOS").innerHTML = 'FxiOS: '+navigator.userAgent.indexOf('FxiOS');
        }, 500);
        if (isMobile) {
            if (isSafari) {
                console.log("Safari");
                setTimeout(()=> document.getElementById("alert").innerHTML = "Safari", 500);
            } else {
                console.log("Mobile, but not Safari");
                setTimeout(()=> document.getElementById("alert").innerHTML = "Mobile, but not Safari", 500);
            }
        
        } else {
            setTimeout(()=> document.getElementById("alert").innerHTML = "Desktop", 500);
        }
    </script>     
</head>

<body>
    <div style="display:flex;justify-content: center;width: 100%;min-height: 500px;align-items: center;">
        <div style="display:flex;flex-direction:column; align-items: center; width: 70%;">
            <div id="alert" style="font-weight: 600;font-size: 25px; margin:30px; text-decoration: underline"> </div>
            <div id="isMobile" style="font-weight: 600;font-size: 25px; margin:10px"> </div>
            <div id="isiPad" style="font-weight: 600;font-size: 25px; margin:10px"> </div>
            <div id="Safari" style="font-weight: 600;font-size: 25px; margin:10px"> </div>
            <div id="Chrome" style="font-weight: 600;font-size: 25px; margin:10px"> </div>
            <div id="CriOS" style="font-weight: 600;font-size: 25px; margin:10px"> </div>
            <div id="FxiOS" style="font-weight: 600;font-size: 25px; margin:10px"> </div>
            <div id="navigator" style="font-weight: 600;font-size: 25px; margin:10px"> </div>
            
            <button style="color: #690422; font-weight: 600;font-size: 25px; margin:10px" onClick= "openBankId()">openBankId</button>
            <button style="color: #690422; font-weight: 600;font-size: 25px; margin:10px" onClick= "openBankId2()">openBankId2</button>
            <button style="color: #690422; font-weight: 600;font-size: 25px; margin:10px" onClick= "openBankId3()">openBankId3</button>
            <button style="color: #690422; font-weight: 600;font-size: 25px; margin:10px" onClick= "openBankId4()">openBankId4</button>
        </div>
    </div>
 <script language="javascript">
       function openBankId() {
            window.location.href = "bankid:///?autostarttoken=6f71addd-cfd2-4934-85cb-ab04c8965bd9&redirect=https%3A%2F%2Fecom.stage.payex.com%2Fcheckout%2F20179c5d340910ab81ce196c6606f972b14d047f015afbd898f9c96577e1b0af%3F_tc_tid%3D37726332bac84911999ca54ca773e051";
           // opens bankId but only from mainframe, not working with iframe, sub frame on Safari iOS
       }
       function openBankId2() {
            window.open('bankid:///?autostarttoken=6f71addd-cfd2-4934-85cb-ab04c8965bd9&redirect=https%3A%2F%2Fecom.stage.payex.com%2Fcheckout%2F20179c5d340910ab81ce196c6606f972b14d047f015afbd898f9c96577e1b0af%3F_tc_tid%3D37726332bac84911999ca54ca773e051');
           // opens bankId and a new browser window at the same time, doesn't work the right way
       }
       function openBankId3() {
            window.open('https://app.bankid.com/?autostarttoken=6f71addd-cfd2-4934-85cb-ab04c8965bd9&redirect=https%3A%2F%2Fecom.stage.payex.com%2Fcheckout%2F20179c5d340910ab81ce196c6606f972b14d047f015afbd898f9c96577e1b0af%3F_tc_tid%3D37726332bac84911999ca54ca773e051');
           // opens bankId on Android and iOS(main frame, sub frame), doesn't work the right way on Desktop
       }
      function openBankId4() {
            window.location.href = 'https://app.bankid.com/?autostarttoken=a6f71addd-cfd2-4934-85cb-ab04c8965bd9&redirect=https%3A%2F%2Fecom.stage.payex.com%2Fcheckout%2F20179c5d340910ab81ce196c6606f972b14d047f015afbd898f9c96577e1b0af%3F_tc_tid%3D37726332bac84911999ca54ca773e051';
           // opens bankId but only from mainframe, not working with iframe, sub frame on Safari iOS
       }
    </script>
    
</body>
</html>
